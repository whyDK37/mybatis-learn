dataSources:
  ds00: !!com.zaxxer.hikari.HikariDataSource
    poolName: account
    jdbcUrl: jdbc:mysql://localhost:3306/ds0?serverTimezone=UTC&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull
    username: root
    password: root
  ds01: !!com.zaxxer.hikari.HikariDataSource
    poolName: account
    jdbcUrl: jdbc:mysql://localhost:3306/ds1?serverTimezone=UTC&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull
    username: root
    password: root

shardingRule:
  tables:
    trans_account:
      actualDataNodes: ds$->{['00','01']}.trans_account_$->{['202007','202008']}
      databaseStrategy:
        inline:
          shardingColumn: seller_no
          algorithmExpression: ds$->{jdbc.java.account.alg.FormatUtils.keepFigures(Math.abs(seller_no.toUpperCase().hashCode()) % 4,2)}
      tableStrategy:
        inline:
          shardingColumn: exp_date
          algorithmExpression: trans_account_$->{jdbc.java.account.alg.FormatUtils.formatDate(exp_date,'yyyyMM')}
      keyGenerator:
        type: SNOWFLAKE
        column: order_id

  defaultTableStrategy:
    none:

props:
  sql.show: true